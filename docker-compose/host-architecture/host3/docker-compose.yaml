version: '2.1'
services:
    elasticsearch:
      image: docker-reg.emotibot.com.cn:55688/elasticsearch-oss:6.3.0-20180720-a9e1ae6
      container_name: elasticsearch-3
      network_mode: host
      ports:
        - "9200:9200"
        - "9300:9300"
      restart: always
      command: elasticsearch -E node.name="172.16.106.132" -E cluster.name="BFOPcluster" -E node.master="true" -E node.data="true" -E network.host="172.16.106.132" -E discovery.zen.minimum_master_nodes="1"  -E discovery.zen.ping.unicast.hosts="172.16.106.130:9300,172.16.106.131:9300,172.16.106.132:9300"
      logging:
        options:
          max-size: "5M"
          max-file: "10"
        driver: json-file
      environment:
        ES_JAVA_OPTS: "-Xmx256m -Xms256m"
      volumes:
        - /etc/localtime:/etc/localtime
#        - ./elasticsearch.yml:/usr/share/elasticsearch/elasticsearch.yml
#        - /home/deployer/infrastructure/volumes/elasticsearch:/usr/share/elasticsearch/data
